#!/command/with-contenv bashio
# shellcheck shell=bash
# shellcheck disable=SC2207

declare config

bashio::log.info "sleeping before discovery..."

sleep 5

config=$(\
    bashio::var.json \
        host "127.0.0.1" \
)

if bashio::discovery "bacnet_interface" "${config}" > /dev/null; then
    bashio::log.info "Successfully send discovery information to Home Assistant."
else
    bashio::log.error "Discovery message to Home Assistant failed!"
fi